<!DOCTYPE html>
<html>
<head>
<title>Versus War - Dashboard</title>
<link rel="shortcut icon" href="../assets/login/images/default.png">
<link rel="icon" type="image/png" href="assets/login/images/default.png"/>
<link rel="stylesheet" type="text/css" href="assets/login/vendor/bootstrap/css/bootstrap.min.css">
<link rel="stylesheet" type="text/css" href="assets/login/fonts/font-awesome-4.7.0/css/font-awesome.min.css">
<link rel="stylesheet" type="text/css" href="assets/login/vendor/animate/animate.css">
<link rel="stylesheet" type="text/css" href="assets/login/vendor/css-hamburgers/hamburgers.min.css">
<link rel="stylesheet" type="text/css" href="assets/login/vendor/select2/select2.min.css">
<link rel="stylesheet" type="text/css" href="assets/login/css/util.css">
<link rel="stylesheet" type="text/css" href="assets/login/css/main.css">
<link href="../assets/plugins/morris/morris.css" rel="stylesheet">
<link href="../assets/plugins/alertify/css/alertify.css" rel="stylesheet" type="text/css">
<link href="../assets/css/bootstrap.min.css" rel="stylesheet" type="text/css">
<link href="../assets/css/icons.css" rel="stylesheet" type="text/css">
<link href="../assets/css/style.css" rel="stylesheet" type="text/css">
<link href="../assets/plugins/prism/prism.css" rel="stylesheet" type="text/css">
<link href="../assets/plugins/ion-rangeslider/ion.rangeSlider.css" rel="stylesheet" type="text/css"/>
<link href="../assets/plugins/ion-rangeslider/ion.rangeSlider.skinModern.css" rel="stylesheet" type="text/css"/>
<link href="../assets/plugins/bootstrap-rating/bootstrap-rating.css" rel="stylesheet" type="text/css">
<link href="../assets/plugins/fullcalendar/css/fullcalendar.min.css" rel="stylesheet" />
<link href="../assets/plugins/c3/c3.min.css" rel="stylesheet" type="text/css"  />
<link rel="stylesheet" href="../assets/plugins/chartist/css/chartist.min.css">
<link href="../assets/plugins/timepicker/tempusdominus-bootstrap-4.css" rel="stylesheet" />
<link href="../assets/plugins/timepicker/bootstrap-material-datetimepicker.css" rel="stylesheet">
<link href="../assets/plugins/clockpicker/jquery-clockpicker.min.css" rel="stylesheet" />
<link href="../assets/plugins/colorpicker/asColorPicker.min.css" rel="stylesheet" type="text/css" />
<link href="../assets/plugins/select2/select2.min.css" rel="stylesheet" type="text/css" />
<link href="../assets/plugins/bootstrap-colorpicker/css/bootstrap-colorpicker.min.css" rel="stylesheet">
<link href="../assets/plugins/bootstrap-datepicker/css/bootstrap-datepicker.min.css" rel="stylesheet">
<link href="../assets/plugins/bootstrap-touchspin/css/jquery.bootstrap-touchspin.min.css" rel="stylesheet" />
<link href="../assets/plugins/summernote/summernote-bs4.css" rel="stylesheet" />
<link href="../assets/plugins/dropzone/dist/dropzone.css" rel="stylesheet" type="text/css">
<link href="../assets/plugins/dropify/css/dropify.min.css" rel="stylesheet">
<link type="text/css" href="../assets/plugins/x-editable/css/bootstrap-editable.css" rel="stylesheet">
<link href="../assets/plugins/jvectormap/jquery-jvectormap-2.0.2.css" rel="stylesheet">
<link href="../assets/plugins/sweet-alert2/sweetalert2.min.css" rel="stylesheet" type="text/css">
<link href="../assets/plugins/datatables/dataTables.bootstrap4.min.css" rel="stylesheet" type="text/css" />
<link href="../assets/plugins/datatables/buttons.bootstrap4.min.css" rel="stylesheet" type="text/css" />
<link href="../assets/plugins/datatables/responsive.bootstrap4.min.css" rel="stylesheet" type="text/css" />
<link href="../assets/plugins/RWD-Table-Patterns/dist/css/rwd-table.min.css" rel="stylesheet" type="text/css" media="screen">
</head>

<body class="fixed-left">
<!-- Loader -->
<div id="preloader"><div id="status"><div class="spinner"></div></div></div>

<!-- Begin page -->
<div id="wrapper">
<!-- ========== Left Sidebar Start ========== -->
<div class="left side-menu">
<button type="button" class="button-menu-mobile button-menu-mobile-topbar open-left waves-effect">
<i class="ion-close"></i>
</button>

<!-- LOGO -->
<div class="topbar-left">
<div class="text-center">
<a href="index.html" class="logo"><i class="mdi mdi-assistant"></i> Versus War</a>
</div>
</div>

<div class="sidebar-inner slimscrollleft">

<div id="sidebar-menu">
<ul>
<li class="menu-title">Main</li>

<li>
<a href="index.html" class="waves-effect">
<i class="mdi mdi-airplay"></i>
<span> Dashboard </span>
</a>
</li>

<li class="has_sub">
<a href="javascript:void(0);" class="waves-effect"><i class="mdi mdi-cards-playing-outline"></i> <span> Category </span> <span class="float-right"><i class="mdi mdi-chevron-right"></i></span></a>
<ul class="list-unstyled">
<li><a href="addcategory.html">Add Category</a></li>
<li><a href="categories.html">Manage Categories</a></li>
</ul>
</li>

<li class="has_sub">
<a href="javascript:void(0);" class="waves-effect"><i class="mdi mdi-account-box"></i> <span> Profiles </span> <span class="float-right"><i class="mdi mdi-chevron-right"></i></span></a>
<ul class="list-unstyled">
<li><a href="addprofile.html">Add Profile</a></li>
<li><a href="profiles.html">Manage Profiles</a></li>
</ul>
</li>

<li class="has_sub">
<a href="javascript:void(0);" class="waves-effect"><i class="mdi mdi-chemical-weapon"></i> <span> Wars </span> <span class="float-right"><i class="mdi mdi-chevron-right"></i></span></a>
<ul class="list-unstyled">
<li><a href="addwar.html">Create War</a></li>
<li><a href="wars.html">Manage Wars</a></li>
</ul>
</li>

<li class="has_sub">
<a href="javascript:void(0);" class="waves-effect"><i class="mdi mdi-poll"></i> <span> Poll Wars </span> <span class="float-right"><i class="mdi mdi-chevron-right"></i></span></a>
<ul class="list-unstyled">
<li><a href="addpollwar.html">Create War</a></li>
<li><a href="pollwars.html">Manage Wars</a></li>
</ul>
</li>

<li>
<a href="warsuggestions.html" class="waves-effect">
<i class="mdi mdi-checkbox-multiple-marked-circle-outline"></i>
<span> War Suggestions </span>
</a>
</li>

<li>
<a href="feedback.html" class="waves-effect">
<i class="mdi mdi-message-text"></i>
<span> Feedbacks </span>
</a>
</li>

</ul>
</div>
<div class="clearfix"></div>
</div> <!-- end sidebarinner -->
</div>
<!-- Left Sidebar End -->
<!-- Start right Content here -->
<div class="content-page">
<div class="content">
<div class="topbar" id="topMenu">

</div>
<div class="page-content-wrapper ">
<div class="container-fluid">
<!-- page title start -->
<div class="row">
<div class="col-sm-12">
<div class="page-title-box">
<h4 class="page-title">War Analysis</h4>
</div>
</div>
</div>
<!-- end page title -->
<!-- dashboard content -->

<div class="row">
<div class="col-12">
<div class="card m-b-30">
<div class="card-body">
<h4 class="mt-0 header-title" id="warName"></h4> <br>
<table id="exampleTable1" class="table table-striped table-bordered" cellspacing="0" width="100%">
<thead>
<tr>
<th> Profile 1 </th>
<th> War Points </th>
<th> War Likes </th>
<th> War Comments </th>
<th> Profile 2 </th>
<th> War Points </th>
<th> War Likes </th>
<th> War Comments </th>
</tr>
</thead>
<tbody class="displayContent">
</tbody>
</table>

</div>
</div>
</div> <!-- end col -->
</div> <!-- end row -->

<!-- dashboard content end-->
<footer class="footer" id="footer">
Â© 2020 Versus War All Right Reserved.
</footer>
</div>
<!-- End main content here -->
</div>
<!-- END wrapper -->
<!-- jQuery  -->
<script src="../assets/js/jquery.min.js"></script>
<script src="../assets/js/popper.min.js"></script>
<script src="../assets/js/bootstrap.min.js"></script>
<script src="../assets/js/modernizr.min.js"></script>
<script src="../assets/js/detect.js"></script>
<script src="../assets/js/fastclick.js"></script>
<script src="../assets/js/jquery.slimscroll.js"></script>
<script src="../assets/js/jquery.blockUI.js"></script>
<script src="../assets/js/waves.js"></script>
<script src="../assets/js/jquery.nicescroll.js"></script>
<script src="../assets/js/jquery.scrollTo.min.js"></script>
<script src="../assets/plugins/alertify/js/alertify.js"></script>
<script src="../assets/pages/alertify-init.js"></script>
<!-- Required datatable js -->
<script src="../assets/plugins/datatables/jquery.dataTables.min.js"></script>
<script src="../assets/plugins/datatables/dataTables.bootstrap4.min.js"></script>
<!-- Buttons examples -->
<script src="../assets/plugins/datatables/dataTables.buttons.min.js"></script>
<script src="../assets/plugins/datatables/buttons.bootstrap4.min.js"></script>
<script src="../assets/plugins/datatables/jszip.min.js"></script>
<script src="../assets/plugins/datatables/pdfmake.min.js"></script>
<script src="../assets/plugins/datatables/vfs_fonts.js"></script>
<script src="../assets/plugins/datatables/buttons.html5.min.js"></script>
<script src="../assets/plugins/datatables/buttons.print.min.js"></script>
<script src="../assets/plugins/datatables/buttons.colVis.min.js"></script>
<!-- Datatable init js -->
<script src="../assets/pages/datatables.init.js"></script>
<!-- Sweet-Alert  -->
<script src="../assets/plugins/sweet-alert2/sweetalert2.min.js"></script>
<script src="../assets/pages/sweet-alert.init.js"></script> 
<!-- Bootstrap inputmask js -->
<script src="../assets/plugins/bootstrap-inputmask/bootstrap-inputmask.min.js" type="text/javascript"></script>
<script src="../assets/plugins/skycons/skycons.min.js"></script>
<script src="../assets/plugins/raphael/raphael-min.js"></script>
<script src="../assets/plugins/morris/morris.min.js"></script>
<script src="../assets/pages/dashborad.js"></script>
<!-- App js -->
<script src="../assets/js/app.js"></script>

<!-- Global site tag (gtag.js) - Google Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-23581568-13"></script>

<script src="../assets/login/js/main.js"></script>
<script >
$('.js-tilt').tilt({
scale: 1.1
})
</script>
<script>
window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-23581568-13');
</script>
<script>
/* BEGIN SVG WEATHER ICON */
if (typeof Skycons !== 'undefined'){
var icons = new Skycons(
{"color": "#fff"},
{"resizeClear": true}
),
list  = [
"clear-day", "clear-night", "partly-cloudy-day",
"partly-cloudy-night", "cloudy", "rain", "sleet", "snow", "wind",
"fog"
],
i;

for(i = list.length; i--; )
icons.set(list[i], list[i]);
icons.play();
};

// scroll

$(document).ready(function() {
$("#boxscroll").niceScroll({cursorborder:"",cursorcolor:"#cecece",boxzoom:true});
$("#boxscroll2").niceScroll({cursorborder:"",cursorcolor:"#cecece",boxzoom:true}); 
});
</script>
<!-- end login scripts -->
</body>
<script src="https://www.gstatic.com/firebasejs/7.15.0/firebase-app.js"></script>
<script src="https://www.gstatic.com/firebasejs/7.15.0/firebase-analytics.js"></script>
<script src="https://www.gstatic.com/firebasejs/7.15.0/firebase-auth.js"></script>
<script src="https://www.gstatic.com/firebasejs/7.15.0/firebase-firestore.js"></script>
<script src="https://www.gstatic.com/firebasejs/7.15.0/firebase-storage.js"></script>
<script type="text/javascript" src="../assets/firebase.js"></script>
<script type="text/javascript" src="../assets/externalHTML.js"></script>
<script type="text/javascript">
//loadHeader();
//loadSideMenu();
loadTopMenu();
//loadFooter();

var uid = sessionStorage.getItem("adminUID");
if(uid==null){
window.location.href="../index.html";
}else{
var docID = getUrlParameter('warID');

db.collection("wars").doc(docID).get().then(async function(doc){
    var count = 0;
    var tabData = [];
    if(doc.exists){
        count += 1;
        var docData = doc.data();
        document.getElementById('warName').innerHTML = docData.warName;
        var currentData = {
            'warName': docData.warName,
        }

        await doc.ref.collection(docData.profile1).get().then(async function(snap1){
            await snap1.forEach((doc)=>{
                var data = doc.data();
                currentData['warPoints1'] = data.warPoints;
                currentData['warLikes1'] = data.warLikes;
                currentData['warComments1'] = data.warComments;
            });
        });

        await doc.ref.collection(docData.profile2).get().then(async function(snap1){
            await snap1.forEach((doc)=>{
                var data = doc.data();
                currentData['warPoints2'] = data.warPoints;
                currentData['warLikes2'] = data.warLikes;
                currentData['warComments2'] = data.warComments;
            });
        });

        await db.collection('profiles').doc(docData.profile1).get().then(async function(proOneDoc){
            var proOne = proOneDoc.data();
            currentData['profile1'] = proOne.profileName;
            await db.collection('profiles').doc(docData.profile2).get().then(async function(proTwoDoc){
                var proTwo = proTwoDoc.data();
                currentData['profile2'] =proTwo.profileName;
                });
        }).then(()=>{
            tabData.push(currentData);
            if(tabData.length==count){
            $('#exampleTable1').dataTable({
            "ordering": true,
            "data": tabData,
            "columns": [
                {'data':'profile1'},
                {'data':'warPoints1'},
                {'data':'warLikes1'},
                {'data':'warComments1'},
                {'data':'profile2'},
                {'data':'warPoints2'},
                {'data':'warLikes2'},
                {'data':'warComments2'},
            ]
            });
            }
        })
    }else{
        window.location.href="wars.html";
    }
});
}
</script>
</html>
